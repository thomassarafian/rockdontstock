 <% brand = ["Adidas", "Air+Jordan", "Nike", "Other+Brands", "Luxury+Brands", "Collections"]
    nike_categories = [ "Foamposite", "KD", "Kobe", "LeBron", "Air Force", "Air Max", "Basketball", "SB", "Other", "Sacai", "Presto", "Cortez", "Fear Of God", "OBJ", "Huarache", "Undercover", "Tailwind", "Stranger Things", "Daybreak", "React Element", "Cactus Plant Flea Market", "Comme Des Garcons", "Yeezy", "Zoomx"]
    adidas_categories = ["Ozweego", "Human Race", "Nite Jogger", "Ivy Park", "Raf Simons", "Yeezy", "Ultra Boost", "NMD", "Iniki", "Stan Smith", "EQT", "Basketball", "Running", "Skateboarding", "Soccer", "Other"]
    air_jordan_categories = ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31", "32", "33", "34", "35", "Future", "Golf", "Legacy 312", "Off-White", "Packs", "Spizike", "Women", "Other"]       
%>

<div class=" fixed-top navbar navbar-expand-sm navbar-light navbar-lewagon" id="navbar-light">
  <%= link_to "/", class: "navbar-brand" do %>
    <%= image_tag("logo.svg", style: 'width: 80%; height: 60px;object-fit: cover;', class: 'icon') %>
  <% end %>
  
  <%= image_tag "navbar/toggler_icon.svg", class: 'toggler_icon_phone navbarSideButton', type: "button" %>  
  
  <%= link_to "/", class: "navbar-brand-phone" do %>
    <%= image_tag("logo.svg", style: 'width: 80%; height: 60px;object-fit: cover;', class: 'icon_phone') %>
  <% end %>

  <ul class="navbar-side" id="navbarSide">
    <div class="navbar-side-white-toggler">
      <%= image_tag "navbar/white/white_toggler_icon.svg" %>  
    </div>
    <li class="navbar-side-item">
      <%= link_to "Mon compte", user_signed_in? ? user_path : user_session_path, class: "side-link" %>
    </li>
    <li class="navbar-side-item">
      <a class="side-link" href="/sneakers">Vends</a>
    </li>
    <li class="navbar-side-item">
     <%= link_to("Tout voir", sneaker_dbs_path, class: "side-link") %>
    </li>
    <li class="navbar-side-item">
      <%= link_to("Nous contacter", new_contact_path, class: "side-link") %>
    </li>
    <div class="navbar-sign">
      <% if user_signed_in? %>
        <li >
          <%= link_to "Déconnexion", destroy_user_session_path , :method => :delete %>
        </li>
      <% else %>
        <li>
          <%= link_to("Me connecter", user_session_path) %>
        </li>
      <% end %>
    </div>
  </ul>

  <div class="overlay"></div>

  <div class="glass_icon_phone">
    <%= image_tag("navbar/magnifying_glass_icon.svg", class: "magnify_glass_icon_phone") %>
  </div>

  <div data-controller="refresh-list" class="glass-search-form">
    <%= form_with url: root_path, method: :get, html: { class: 'glass-search-form-input', data: { refresh_list_target: 'form' } } do |f| %>
      <div class="hide-search-form">
        <%= image_tag("arrow_back.svg", class: "phone-hide-search-arrow") %>
        <%= image_tag("arrow_back.svg", class: "hide-search-arrow") %>
      </div>
      <div class="home-glass-search-form">
        <%= f.text_field  :query,
                            class: "",
                            id: "home-glass-search-form", 
                            placeholder: 'Recherche ta paire',
                            value: params[:query],
                            data: {
                              refresh_list_target: 'searchInput',
                              action: "keyup->refresh-list#update",
                            } %>
          <%= image_tag("navbar/magnifying_glass_icon.svg", class: "magnify_glass_icon_phone_input") %>
        <% end %>
      </div>        
      <div class="search-filter">
        <div class="filters" data-controller="filters">
          <button class="dropdown-filter btn btn-secondary" type="button">Filtres</button>
            <div class="dropdown-filter-items">
              <h5 class="filter-label">MARQUES</h5>
              <%= select_tag :category, 
              options_for_select(brand),
              include_blank: "Toute les marques",
              class: "form-select",
              data: { action: "filters#filter", target: "filters.filter" } %>

              <h5 class="filter-label">PRIX</h5>
                <%= select_tag :price,
                    options_for_select(
                      [ ["Moins de 100€", 100], ["Moins de 200€", 200], ["Moins de 300€", 300], ["Plus de 300€", 300] ], params[:price]
                    ),
                include_blank: "Tous les prix",
                class: "form-select",
                data: { action: "filters#filter", target: "filters.filter" } %>
              
              <h5 class="filter-label">DATE DE SORTIE</h5>
                <%= select_tag :release_date,
                    options_for_select(
                      [ ["Avant 2001", 2001], ["2002", 2002], ["2003", 2003], ["2004", 2004] ], params[:release_date]
                    ),
                include_blank: "Toute années",
                class: "form-select",
                data: { action: "filters#filter", target: "filters.filter" } %>
            </div>

       <!-- <div class="search-filter">
        Filtres
      </div> -->
    <%= render 'shared/list', sneaker_dbs: @sneaker_dbs %>
      </div>
    </div>
  </div>

  
    <style type="text/css">
      h5 {
        color: black;
      }
      .dropdown-filter {
        width: 100%;
        margin-top: -20px;
      }
      .dropdown-filter{
        margin:20px 0;
        width: 100%;
      }
      .search-filter {
        padding: 0;
        color: white;
        text-align: center;
        background-color: white;
      }      
    </style>
    
  
  <div class="icons">
    <div class="glass_icon">
      <%= image_tag("navbar/magnifying_glass_icon.svg", class: "magnify_glass_icon") %>
    </div>
    <%= link_to('<button type="button" id="sell_button" class="btn btn-dark">Vends</button>'.html_safe, sneakers_path ) %>
    <%= image_tag "navbar/toggler_icon.svg", class: 'toggler_icon navbarSideButton', type: "button" %>
  </div>
</div>
  

<script type="text/javascript">
  $(document).ready(function() {
    $('.navbarSideButton').on('click', function() {
      $('#navbarSide').addClass('reveal');
      $('.overlay').show();
    });

    $('.overlay, .navbar-side-item>a, .navbar-side-white-toggler').on('click', function(){
      $('#navbarSide').removeClass('reveal');
      $('.overlay').hide();
    });

    $('.glass_icon_phone').on('click', function() {
      $('.toggler_icon_phone').hide();
      $('.glass-search-form').show();      
      $('.magnify_glass_icon_phone').hide();
      $('.navbar').css('padding', 0);
      $('.navbar').css('position', 'fixed');
      $('.dropdown-filter-items').hide();
    });
    


    $('.dropdown-filter').on('click', function() {
      $('.dropdown-filter-items').slideToggle('fast');
    });

    $('.glass_icon').on('click', function() {
      $('.glass_icon').hide();
      $('.glass-search-form').show();
    });

    $('.hide-search-arrow').on('click', function () {
      $('.glass-search-form').hide();
      $('.navbar').css('padding', '10px');
      $('.navbar').css('position', 'relative');
      $('toggler_icon, .glass_icon, #sell_button').show();
    })

    $('.phone-hide-search-arrow').on('click', function () {
      $('.glass-search-form').hide();
      $('.navbar').css('padding', '10px');
      $('.navbar').css('position', 'relative');
      $('img.toggler_icon_phone, .magnify_glass_icon_phone').show();
    })
  });
</script>