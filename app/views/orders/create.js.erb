function initStripe() {
  const stripe = Stripe("<%= stripe_public_key %>");

  const options = {
    clientSecret: '<%= @intent.client_secret %>',
    appearance: {
      theme: 'flat',
      rules: {
        '.Input:hover': {
          outline: '1px solid rgba(100, 100, 100, 0.25)'
        },
      },
      variables: {
        colorPrimary: '#0E0E0E',
        colorText: '#0E0E0E',
        spacingUnit: '4px',
        borderRadius: '0',
        focusBoxShadow: '0 0 0 0.2rem rgba(100, 100, 100, 0.25)'
      }
    },
  };

  const elements = stripe.elements(options);
  const paymentElement = elements.create('payment');
  paymentElement.mount('#payment-element');

  const form = document.getElementById('payment-form');
  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    const {error} = await stripe.confirmPayment({
      elements,
      confirmParams: {
        return_url: "<%= sneaker_payment_complete_url(order_id: @order.id) %>"
      },
    });

    if (error) {
      const messageContainer = document.querySelector('#error-message');
      messageContainer.textContent = error.message;
    }
  })
}

document.getElementById('order-forms').innerHTML = "<%= j render partial: 'orders/payment-form' %>"
initStripe();
window.scrollTo({top: '0'})