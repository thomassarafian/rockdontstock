<h1>Home page</h1>

<% if user_signed_in? %>
	<p>Hello <%=current_user.email %></p>
<% end %>

<div class="card" style="width: 18rem;">
  <img src="https://picsum.photos/400/300" class="card-img-top">
  <div class="card-body">
    <h5 class="card-title">Card title</h5>
    <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
    <a href="#" class="btn btn-primary">Go somewhere</a>
  </div>
</div>


<%=	link_to "Voir la liste des Sneakers", sneakers_path %>
<br><br><br>
<%= link_to "Modifier mon profil", edit_user_registration_path %>

<div>
  <%= form_with do |form| %>
    <%#= form.text_field :iban %>
  <p><%=  iban = "FR7610278073740002042450174" %> <!-- (+174 -> false)  --></p> 
  <p><%= stripe_iban = "FR1420041010050500013M02606" %></p>

  <p>iban : <%= iban.size %></p>
  
  <p>stripe_iban : <%= stripe_iban.size %></p>


  <p>iban : <%= iban.match?("[a-zA-Z]{2}[0-9]{2}[a-zA-Z0-9]{4}[0-9]{7}([a-zA-Z0-9]?){0,16}") %></p> 

  <p>stripe_iban : <%= stripe_iban.match?("[a-zA-Z]{2}[0-9]{2}[a-zA-Z0-9]{4}[0-9]{7}([a-zA-Z0-9]?){0,16}") %></p> 
  
  <% end %>
</div>


<%#
  Stripe::Customer.create({
    email: "bg@gmail.com",
    name: "Le bg du 69",
    description: 'Test customer new with webhook',
  })
 %>

<%#
identity_address = Stripe::File.create({
  purpose: 'identity_document',
  file: File.new(current_user.ids[2].current_path),
  }, {
  stripe_account: 'acct_1InK1r2QFklsr9vG',
})


identity_front = Stripe::File.create({
  purpose: 'identity_document',
  file: File.new(current_user.ids[0].current_path),
  }, {
  stripe_account: 'acct_1InK1r2QFklsr9vG',
})

identity_verso = Stripe::File.create({
  purpose: 'identity_document',
  file: File.new(current_user.ids[1].current_path),
  }, {
  stripe_account: 'acct_1InK1r2QFklsr9vG',
})

person_token = Stripe::Token.create({
  person: {
	verification: {
		document: {
				front: identity_front.id,
      			back: identity_verso.id,
		},
		additional_document: {
			front: identity_address.id
		}
	},
  },
})

Stripe::Account.update_person(
	'acct_1InK1r2QFklsr9vG',
	'person_4InK1r00pgBlEfDf',
	{
		person_token: person_token
	})
%>

