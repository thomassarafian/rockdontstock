<div class="banner">
  <div class="container">
    <h1 class="font-weight-bold">Faites pour <a class="white">être</a> portées,<br>rien d'autre.</h1>
    <div class="scrolling">
      <a style=" color: black;" href="#scroll"><p>Voir les annonces</p></a>
      <%= image_tag("banner/arrow") %>
    </div>
  </div>
</div>


<div id="scroll" class="container">
  <h2 style="font-style: italic;">Best sellers</h2>
  <div class="cards">
    <% SneakerDb.all.limit(10).each do |sneaker| %>
        <div class="card">
         <div class="card_img">
          <%= image_tag(sneaker.img_url, style: 'width: 100%; justify-content:center;') %>
          </div>
          <div class="title"><strong><%= sneaker.name %></strong></div>
          <div class="price">À partir de <%= sneaker.price_cents %>€</div>
        </div>
    <% end %>
  </div>  
    <div class="all_sneakers"><%= link_to "Tout voir", sneakers_path %></div>
</div>


<div class="container">
  <div class="article">
    <h2>Legit Check Tech</h2>
    <p id="article-text">
      Le système “Legit Check Tech” d’Entrupy pour les sneakers comprend une application et une boîte en bois sur laquelle sont installés différents iPods connectés à cette même appli et qui photographient plusieurs points caractéristiques de la chaussure. Avant de placer une<span id="dots">...</span> 
      <span id="more">"Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?"</span>
      <a href="javascript:void(0)" id="read_more_link">Lire la suite</a>
    </p>
    <div class="link-to-articles">
      <%= link_to "Derniers articles", root_path, class:"last-articles" %>
    </div>
  </div>
</div>


<div class="container">
  <div class="insta-posts">
  <h2>#rockdontstock</h2>

  <div class="card-deck">
    <div class="card">
      <img class="card-img-top" src="https://scontent-cdg2-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/c0.169.1349.1349a/s640x640/173491141_2863035090636568_9098333768633973117_n.jpg?tp=1&_nc_ht=scontent-cdg2-1.cdninstagram.com&_nc_cat=104&_nc_ohc=70kKygi8QCkAX9dWxip&edm=APU89FABAAAA&ccb=7-4&oh=c202a6923b78ae3d4d853f590770c491&oe=60C51D25" alt="Card image cap">
    </div>

    <div class="card">
      <img class="card-img-top" src="https://scontent-cdg2-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/c0.107.925.925a/s640x640/191762315_3002706323346860_7888182183611292828_n.jpg?tp=1&_nc_ht=scontent-cdg2-1.cdninstagram.com&_nc_cat=108&_nc_ohc=u3sv-qTbp04AX-G1zC5&edm=ABfd0MgBAAAA&ccb=7-4&oh=12ff02938621fb5557f11eda642c5223&oe=60C58100&_nc_sid=7bff83" alt="Card image cap">
    </div>

    <div class="card">
      <img class="card-img-top" src="https://scontent-cdg2-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/c0.169.1349.1349a/s640x640/178211454_877203136191272_4380870308947756108_n.jpg?tp=1&_nc_ht=scontent-cdg2-1.cdninstagram.com&_nc_cat=108&_nc_ohc=ccl9QEQJ8s8AX_mbG_u&tn=KJJkkzkZcSOcC721&edm=APU89FABAAAA&ccb=7-4&oh=9f6a43fd6e3ab4457db4d1deba5daabf&oe=60C43CB9&_nc_sid=86f79a" alt="Card image cap">  
    </div>

    <div class="card">
      <img class="card-img-top" src="https://scontent-cdt1-1.cdninstagram.com/v/t51.2885-15/sh0.08/e35/s640x640/181134885_873821546514558_5092927093533758463_n.jpg?tp=1&_nc_ht=scontent-cdt1-1.cdninstagram.com&_nc_cat=106&_nc_ohc=vGocVRzab4cAX87e4gg&edm=APU89FABAAAA&ccb=7-4&oh=30556d3cbb29de796c5f974294fa9d27&oe=60C42EA6&_nc_sid=86f79a" alt="Card image cap">  
    </div>
  </div>

  
  </div>
</div>





<%= javascript_pack_tag "read_more" %>


<%#= link_to "Modifier mon profil", edit_user_registration_path %>



<%#= 
transfer = Stripe::Transfer.create({
  amount: 1000 , # sneaker.price - 490 (livraison) - (12 % du prix de la paire / 2) (service)
  currency: "eur",
  destination: "acct_1Iuvaq2RPNtnbUTH",
}) %>



<%#
p payout = Stripe::Payout.create({
      amount: 100,
      currency: 'eur',
      destination: 'ba_1Inmn42QFklsr9vGI323QckG',#@account.external_accounts.data[0].id
      method: "standard",
      }, {
        stripe_account: 'acct_1InK1r2QFklsr9vG',
      }) 
%>


<%# 
if current_user
  if !current_user.token_account? && current_user.date_of_birth? && current_user.line1? && current_user.city? && current_user.postal_code? && current_user.phone? 
    create_connect_account
    p "LE USER A REMPLI TOUTE SES INFOS DONC ON LUI CRÉÉ UN COMPTE CONNECT"
  end 
  #if current_user.ids[0] && current_user.ids[1] && current_user.ids[2]
    #send_identity_document
  #end 
end




def send_identity_document
  identity_front = Stripe::File.create({
    purpose: 'identity_document',
    file: File.new(current_user.ids[0].current_path),
    }, {
    stripe_account: current_user.stripe_account_id,
  })

  identity_verso = Stripe::File.create({
    purpose: 'identity_document',
    file: File.new(current_user.ids[1].current_path),
    }, {
    stripe_account: current_user.stripe_account_id,
  })

  identity_address = Stripe::File.create({
    purpose: 'identity_document',
    file: File.new(current_user.ids[2].current_path),
    }, {
    stripe_account: current_user.stripe_account_id,
  })

  person_token = Stripe::Token.create({
    person: {
    verification: {
      document: {
          front: identity_front.id,
              back: identity_verso.id,
      },
      additional_document: {
        front: identity_address.id
      }
    },
    },
  })

  Stripe::Account.update_person(
    current_user.stripe_account_id,
    current_user.person_id,
    {
      person_token: person_token
    })    
end
%>
<%#
identity_address = Stripe::File.create({
  purpose: 'identity_document',
  file: File.new(current_user.ids[2].current_path),
  }, {
  stripe_account: 'acct_1InK1r2QFklsr9vG',
})


identity_front = Stripe::File.create({
  purpose: 'identity_document',
  file: File.new(current_user.ids[0].current_path),
  }, {
  stripe_account: 'acct_1InK1r2QFklsr9vG',
})

identity_verso = Stripe::File.create({
  purpose: 'identity_document',
  file: File.new(current_user.ids[1].current_path),
  }, {
  stripe_account: 'acct_1InK1r2QFklsr9vG',
})

person_token = Stripe::Token.create({
  person: {
	verification: {
		document: {
				front: identity_front.id,
      			back: identity_verso.id,
		},
		additional_document: {
			front: identity_address.id
		}
	},
  },
})

Stripe::Account.update_person(
	'acct_1InK1r2QFklsr9vG',
	'person_4InK1r00pgBlEfDf',
	{
		person_token: person_token
	})
%>

