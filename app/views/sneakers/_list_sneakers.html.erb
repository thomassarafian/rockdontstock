<div data-refresh-list-target="list">
  <div id="scroll" class="container">
    <div class="sneaker-cards">
      <% sneakers.where("state >= ?", 1).all.limit(8).each do |sneaker| %>
          <div class="sneaker-card" >
            <div class="sneaker-card_img" data-toggle="modal" data-target="#exampleModal-<%= sneaker.id %>">
              <%=  cl_image_tag(sneaker.photos[0].key, style: 'width: 100%; justify-content:center;') %>
            </div>
            <div class="sneaker-title"><strong><%= sneaker.sneaker_db.name %></strong></div>
              <div class="sneaker-price"><%= sneaker.condition %> / 10 &nbsp;|&nbsp; <%= humanized_money_with_symbol sneaker.price %></div>
          </div>
      <% end %>
    </div>  
  </div>
</div>

<% sneakers.where("state >= ?", 0).all.limit(8).each do |sneaker| %>
  <div class="modal fade" id="exampleModal-<%= sneaker.id %>" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel"><%= sneaker.sneaker_db.name %></h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
              <div class="carousel-item active">
                <%= cl_image_tag(sneaker.photos[0].key, class: 'sneaker-show-photos') %>
              </div>
              <div class="carousel-item ">
                <%= cl_image_tag(sneaker.photos[1].key, class: 'sneaker-show-photos') %>
              </div>
              <div class="carousel-item ">
                <%= cl_image_tag(sneaker.photos[2].key, class: 'sneaker-show-photos') %>
              </div>
              <div class="carousel-item ">
                <%= cl_image_tag(sneaker.photos[3].key, class: 'sneaker-show-photos') %>
              </div>
              <div class="carousel-item ">
                <%= cl_image_tag(sneaker.photos[4].key, class: 'sneaker-show-photos') %>
              </div>
              <div class="carousel-item ">
                <%= cl_image_tag(sneaker.photos[5].key, class: 'sneaker-show-photos') %>
              </div>
              <div class="carousel-item ">
                <%= cl_image_tag(sneaker.photos[6].key, class: 'sneaker-show-photos') %>
              </div>
              <div class="carousel-item ">
                <%= cl_image_tag(sneaker.photos[7].key, class: 'sneaker-show-photos') %>
              </div>
            </div>
            <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon sneaker-show-prev-icon" aria-hidden="true"></span>
              <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
              <span class="carousel-control-next-icon sneaker-show-next-icon" aria-hidden="true"></span>
              <span class="sr-only">Next</span>
            </a>
          </div>
          <div class="modal-sneaker-infos">
            <p><strong><%= humanized_money_with_symbol sneaker.price %></strong><br>Hors frais d'authentification</p>
            <div class='modal-sneaker-all'>
              <div class="modal-sneaker-size-cond">
                <p>Taille : <strong><%=  sneaker.size %> FR</strong></p> <%#= US (shoes_size[@sneaker.size] FR)%>
                <p>Condition : <strong><%= sneaker.condition %>/10</strong></p>
              </div>
              <div class="modal-sneaker-box-extras">
                <p>Box : <strong><%= sneaker.box %></strong></p>
                <p>Extras : <strong><%= sneaker.extras %></strong></p>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer" style="justify-content: center;">
          <%# if current_user != sneaker.user %>
            <%#= form_tag orders_path(sneaker_id: sneaker.id) do %>
              <%#= submit_tag 'Acheter', class: 'btn btn-dark' %>
            <%# end %>
          <%# else %>
            <%# if policy(sneaker).edit? %>
              <!-- <button type="button" class="btn btn-dark sneaker-show-btn"> -->
                <%#= link_to "Modifier la paire", edit_sneaker_path(sneaker), style: 'color: white;' %>
              <!-- </button> -->
            <%# end %>
            <% if policy(sneaker).destroy? %>
              <button type="button" class="btn sneaker-show-btn" style="background-color: #2e3338;">
                <%= link_to "Supprimer", sneaker_path(sneaker), method: :delete, data: { confirm: "Are you sure?" }, style: 'color: white;' %>
              </button>
            <% end %>   
          <%# end %>
        </div>
      </div>
    </div>
  </div>
<% end %>

